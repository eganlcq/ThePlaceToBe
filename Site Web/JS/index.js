function appelAjax(e,t){$.ajaxSetup({processData:!1,contentType:!1});var n=new FormData,a="unknownUri";switch(!0){case Boolean(e.href):a=$(e).attr("href").split(".html")[0];break;case Boolean(e.action):a=$(e).attr("action").split(".html")[0]}(n=new FormData(e)).append("senderId",e.id),n.append("senderName",t),$.post("index.php?rq="+a,n,gereRetour)}function gereRetour(e){var t;e=testeJson(e);for(t in e)switch(t){case"about":$("main").html(e[t]),$("html,body").animate({scrollTop:0},"slow"),$("#propos div:not(#propos div:first)").hide(),$("#propos li").click(function(){$("#propos div").hide(),$("#propos li").removeClass("selected"),$(this).addClass("selected");var e=parseInt($(this).attr("id"));$("#propos div:eq("+e+")").show(500)});break;case"login":$("body").append(e[t]),$("body").outerWidth(!0)<500&&($("<p id='CreateCompte'>Cr√©er un compte</p>").insertAfter("#connexion input[type=submit]"),$("#inscription").hide(),$(document).on("click","#CreateCompte",function(e){e.preventDefault(),$(this).remove(),$("#inscription").show(),$("#connexion").hide()})),$("#inscription").submit(function(e){e.preventDefault(),appelAjax(this),$(".log").remove()}),$("#connexion").submit(function(e){e.preventDefault(),appelAjax(this),$(".log").remove()}),$("#retour").click(function(e){e.preventDefault(),$(".log").remove()});break;case"connexion":var n=JSON.parse(e[t]),a="<img id=avatar src=image/avatar/"+n.photo+" height=50px width=50px alt='Avatar'><p>"+n.pseudo+"</p><p id='liste'>&#9662;</p>";$("#compte").html(a),$("#compte p").click(function(e){e.preventDefault(),$("#gestion").slideToggle()});break;case"logout":$("#compte").html(e[t]),$("#compte a").click(function(e){e.preventDefault(),appelAjax(this)}),$("#gestion").css("display","none");break;case"compte":$("main").html(e[t]),$("#file").change(function(){if(this.files[0]){var e=new FileReader;e.onload=function(e){$("#imageAvatar").attr("src",e.target.result)},e.readAsDataURL(this.files[0])}}),$("#formCompte").submit(function(e){e.preventDefault(),appelAjax(this)}),$("#gestionCompte a").click(function(e){e.preventDefault(),$("#listeGestionCompte a").removeClass("selected"),$(this).addClass("selected"),appelAjax(this)});break;case"erreur1":$("#erreur1").html(e[t]);break;case"erreur2":$("#erreur2").html(e[t]);break;case"erreur3":$("#erreur3").html(e[t]);break;case"erreur4":$("#erreur4").html(e[t]);break;case"achiev":$("#contenuCompte").html(e[t]),$("main a").click(function(e){e.preventDefault(),appelAjax(this)});break;case"gestionCompte":$("#contenuCompte").html(e[t]),$("#contenuAdmin form input[type=submit]").click(function(e){var t=e.target.name;$("#contenuAdmin form").submit(function(e){e.preventDefault(),appelAjax(this,t)})}),$("#contenuCompte a").click(function(e){e.preventDefault(),appelAjax(this)}),$("#menuAdmin a").click(function(e){$("#menuAdmin a").removeClass("selected"),$(this).addClass("selected"),e.preventDefault(),appelAjax(this)}),$("#contenuAdmin li").click(function(e){e.preventDefault(),$(this).next("form").is(":visible")||$("#contenuAdmin form:visible").slideToggle(),$(this).next("form").slideToggle()});break;case"adminconnexion":$("#contenuCompte").html(e[t]),$("#listeGestionCompte a").removeClass("selected"),$("#listeGestionCompte a:first").addClass("selected"),$("#formAdmin").submit(function(e){e.preventDefault(),appelAjax(this)});break;case"slogan":$("main").html(e[t]),$("main a").click(function(e){e.preventDefault(),appelAjax(this)});break;default:$("main").html(e[t])}}function testeJson(e){var t;try{t=JSON.parse(e)}catch(n){t={jsonError:{"Error: ":n,"Json: ":e}}}return t}$(document).ready(function(){$("footer .prevDef a").click(function(e){e.preventDefault(),appelAjax(this)}),$("main a").click(function(e){e.preventDefault(),appelAjax(this)}),$("menu a").click(function(e){e.preventDefault(),appelAjax(this)}),$("#gestion a").click(function(e){e.preventDefault(),appelAjax(this),$("#gestion").css("display","none")}),$("#compte p").click(function(e){e.preventDefault(),$("#gestion").slideToggle()})});